<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Support <%= company.name %> through donations, volunteering, or partnerships to help bridge the digital divide.">
    <title>Support Us - <%= company.name %></title>
    <link rel="stylesheet" href="./public/css/main.css">
    <%- include('partials/favicon-stylesheet') %>
</head>
<body>

<%- include('partials/jumbotron') %>
<%- include('partials/navbar') %>

<main class="container my-5">
    <h2 class="mb-4">Available Stock</h2>
    <div class="row">
        <!-- Laptops Section -->
        <div class="col-md-12">
            <h3 class="mt-2">Laptops</h3>
            <p>Laptops are first come, first served. You must have a valid concession card to purchase a laptop, and there is a one per person limit.</p>
            <div class="row">
                <% const laptops = [
                    {id: '11304', name: 'HP ProBook 430 G4', processor: 'Intel i5-7200U 2.50GHz', optical: '',storage: '128GB SSD', ram: '8GB', battery: 6.41, screen: '13.2"', concessionPrice: 150.0, image: 'images/20241123_154320_800x600_.jpg'},

                    {id: '11316', name: 'HP Elitebook 850 G6', processor: 'Intel i5-8265u 1.6GHz',optical: '', storage: '128GB SSD', ram: '8GB', screen: '13.2"', concessionPrice: 150.0, image: 'images/20241129_132916_800x600_.jpg'},
                    {id: '11329', name: 'ASUSTek VivoBook', processor: 'Pentium N6000 1.10',optical: '', storage: '256 GB NVMe', ram: '8GB', screen: '15.5"', concessionPrice: 200.0, image: ''}


                ]; %>
                <% laptops.forEach(item => { %>
                    <%- include('partials/StockItem', { item: item }) %>
                <% }); %>
            </div>
        </div>


        <!-- Desktops Section -->
        <div class="col-md-12">
            <h3 class="mt-2">Desktops</h3>
            <p>The listed concession price is only available to concession card holders. Please have a valid concession card ready when you make your purchase, you may purchase a desktop computer without a concession card however you
                will be charged our full market price.</p>
            <div class="row">
                <% const desktops = [
                    {id: '11282', name: 'Hewlett-Packard HP2210', processor: 'Intel i7-26003.8', storage: '500 GB HDD', ram: '4GB', monitor: '24" monitor', concessionPrice: 95.0, fullPrice: 142.50, image: 'images/desktop-1.jpg'},
                    {id: '11202', name: 'HP Prodesk 600 G1 SFF', processor: 'Intel i5-45903.30', storage: '240GB SSD', ram: '8GB', monitor: '19" monitor', concessionPrice: 110.0, fullPrice: 165.0, image: 'images/desktop-2.jpg'},
                    {id: '11288', name: 'Lenovo M700', processor: 'Intel i5-64002.70', storage: '256GB SSD', ram: '8GB', monitor: '22" monitor', concessionPrice: 125.0, fullPrice: 187.50, image: 'images/desktop-3.jpg'}
                ]; %>
                <% desktops.forEach(item => { %>
                    <%- include('partials/StockItem', { item: item }) %>
                <% }); %>
            </div>
        </div>



    </div>
    <p class="mt-4 text-muted">Each computer comes with Linux Mint (<%= company.name %> Edition), necessary accessories, and a 3-month warranty.</p>
    <p class="text-muted">Laptops are limited to one per person with a valid concession card.</p>
</main>

<%- include('partials/footer') %>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        fetch('/api/stocklist')
            .then(response => response.json())
            .then(data => {
                const { desktops, laptops } = data;

                // Populate Desktops
                const desktopContainer = document.querySelector('#desktops');
                desktops.forEach(desktop => {
                    const item = `
                        <div class="list-group-item">
                            <h5 class="mb-1">${desktop.name} <small>(ID: ${desktop.id})</small></h5>
                            <p class="mb-1">Processor: ${desktop.processor}</p>
                            <p class="mb-1">Storage: ${desktop.storage}, RAM: ${desktop.ram}</p>
                            <p class="mb-1">Monitor: ${desktop.monitor}</p>
                            <p>Concession Price: $${desktop.concessionPrice}, Full Price: $${desktop.fullPrice}</p>
                        </div>`;
                    desktopContainer.insertAdjacentHTML('beforeend', item);
                });

                // Populate Laptops
                const laptopContainer = document.querySelector('#laptops');
                laptops.forEach(laptop => {
                    const item = `
                        <div class="list-group-item">
                            <h5 class="mb-1">${laptop.name} <small>(ID: ${laptop.id})</small></h5>
                            <p class="mb-1">Processor: ${laptop.processor}</p>
                            <p class="mb-1">Storage: ${laptop.storage}, RAM: ${laptop.ram}</p>
                            <p class="mb-1">Screen Size: ${laptop.screen}</p>
                            <p>Concession Price: $${laptop.concessionPrice}</p>
                        </div>`;
                    laptopContainer.insertAdjacentHTML('beforeend', item);
                });
            })
            .catch(err => {
                console.error('Failed to load stocklist:', err);
            });
    });
</script>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>